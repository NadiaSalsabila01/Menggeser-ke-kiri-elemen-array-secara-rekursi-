#include <iostream>
#include <fstream>
#include <string>
using namespace std;

// ======================== Struktur Node ========================
struct KTP {
    string nik;
    string nama;
    string alamat;
    string jenisKelamin;
    int umur;
    KTP* next;
};

// Pointer head Linked List
KTP* head = nullptr;

// ======================== Fungsi Tambah di Depan ========================
void tambahDepan(string nik, string nama, string alamat, string jk, int umur) {
    KTP* baru = new KTP;
    baru->nik = nik;
    baru->nama = nama;
    baru->alamat = alamat;
    baru->jenisKelamin = jk;
    baru->umur = umur;
    baru->next = head; // sambungkan ke head lama
    head = baru;       // ubah head ke node baru
}

// ======================== Fungsi Tampilkan Data ========================
void tampilkanData() {
    if (head == nullptr) {
        cout << "Data KTP masih kosong.\n";
        return;
    }

    cout << "=== DAFTAR DATA KTP ===\n";
    KTP* bantu = head;
    while (bantu != nullptr) {
        cout << "NIK           : " << bantu->nik << endl;
        cout << "Nama          : " << bantu->nama << endl;
        cout << "Alamat        : " << bantu->alamat << endl;
        cout << "Jenis Kelamin : " << bantu->jenisKelamin << endl;
        cout << "Umur          : " << bantu->umur << endl;
        cout << "---------------------------\n";
        bantu = bantu->next;
    }
}

// ======================== Fungsi Baca File ========================
void bacaFile(const string& namaFile) {
    ifstream file(namaFile);
    if (!file.is_open()) {
        cout << "Gagal membuka file: " << namaFile << endl;
        return;
    }

    string nik, nama, alamat, jk;
    int umur;

    while (file >> nik >> nama >> alamat >> jk >> umur) {
        tambahDepan(nik, nama, alamat, jk, umur);
    }

    file.close();
}

// ======================== MAIN PROGRAM ========================
int main() {
    string namaFile = "dataKTP.txt";

    cout << "Membaca data dari file...\n";
    bacaFile(namaFile);

    cout << "\nMenampilkan data yang tersimpan di Linked List:\n";
    tampilkanData();

    return 0;
}
